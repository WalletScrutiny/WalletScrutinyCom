---
wsId: bitkeyBlock
title: Bitkey - Bitcoin Wallet
altTitle: 
authors:
- danny
users: 1000
appId: world.bitkey.app
appCountry: US
released: 2024-02-28
updated: 2024-10-11
version: 2024.71.0 (3)
stars: 4.1
ratings: 
reviews: 11
size: 
website: https://bitkey.world
repository: https://github.com/proto-at-block/bitkey
issue: 
icon: world.bitkey.app.png
bugbounty: 
meta: ok
verdict: reproducible
date: 2024-08-30
signer: c0d0f9da7158cde788d0281e9ebd07034178165584d635f7ce17f77c037d961a
reviewArchive:
- date: 2024-08-30
  version: 2024.67.0 (1)
  appHash: a3699344ebea4262a7d5652a6ea0a9bf45ab1b3a73423fae3e289c05f3c9ee72
  gitRevision: 3e0dace0287b9ad1ad11631f05bb5f067db5db6d
  verdict: reproducible
- date: 2024-07-26
  version: 2024.63.0 (4)
  appHash: d1adb1725e83e115c169f3676cee3b67fb97e044f6e8ba5be4c7dd88fe746de9
  gitRevision: 6ae7c72d480ca51b583f6b18d05516226e30f5a4
  verdict: reproducible
- date: 2024-03-23
  version: 2024.63.0 (2)
  appHash: 110568d39beb8b0ccb6fc0f4ed710c2d129392137acc9e97202d5ac1ee192125
  gitRevision: 93c2de0de2ff3717c59dffa274b444490b4a45d6
  verdict: reproducible
twitter: Bitkeyofficial
social:
- https://www.linkedin.com/company/bitkey-official
- https://www.facebook.com/profile.php?id=100088526238789
- https://www.instagram.com/ownbitkey
redirect_from: 
developerName: Block, Inc.
features:
- multiSignature

---

**Disclaimer**: The WalletScrutiny project is sponsored by Spiral, a subsidiary of Block.

<iframe width="560" height="315" src="https://www.youtube.com/embed/pZ-Yi7A-o_A?si=cP6zKgW7r-JosAb-" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

## Analysis 

This is the **companion app** to the {% include walletLink.html wallet='hardware/blockhww' verdict='true' %}. It requires an NFC-capable phone, otherwise the app would not be installed.

The setup process involves:

- Opening the app and choosing "Set up new wallet". Without the hardware device, it would not be possible to set up a new wallet. The alternate option is "More Options".
    - More Options:
        - If the user selects More Options, the user can: 
           - Accept an Invite to be a trusted contact (An invite code generated by a bitkey holder is required)
           - Recover your wallet. If the user is on Android, this requires signing in to Google Drive. 
           - Import your wallet. Use the user's Emergency Access Kit to import the wallet. There is a mobile key code that is stored in the Emergency Access Kit which can be inputted in a field.
           - The Emergency Access Kit is a PDF document located in the device's cloud backup. It can be scanned with a QR code, or the details can be entered manually.
- Pair the hardware device with the app using NFC (no initial charging required).

- Once paired with a bitkey HWW this product can function as a wallet.

### Recovery Options

Here are the available recovery options [offered by Bitkey.](https://support.bitkey.world/hc/en-us/articles/18801968949652-What-recovery-methods-are-available  )

>  - [Cloud recovery](https://support.bitkey.world/hc/en-us/articles/18842210239764): Lost/Replaced phone with cloud backup available
>
>  - [Delay + Notify](https://support.bitkey.world/hc/en-us/articles/18842292452500):
>
>    - Lost/Replaced phone without cloud backup available
>
>    - Lost/Replaced hardware device with/without cloud backup available
>
>  - [Cloud Health Check](https://support.bitkey.world/hc/en-us/articles/24491938926484): Lost/Replaced Cloud account
>
>  - [Trusted Contacts:](https://support.bitkey.world/hc/en-us/articles/24395098961940) Lost/Replaced BOTH hardware device and phone, near the same time
>
>  - [Emergency Access Kit](https://support.bitkey.world/hc/en-us/articles/24395170222868): Bitkey app unavailable in app store(s)

<hr>

[**Release Notes**](https://bitkey.world/en-US/releases)

# Verified Builds

This is the [documentation](https://github.com/proto-at-block/bitkey/blob/main/app/verifiable-build/android/README.md) for the build process for the Bitkey Android app, and these are the [preparation instructions](https://github.com/proto-at-block/bitkey/blob/main/app/verifiable-build/android/README.md#prep-work).

## Update for version 2024.68.0

- We are still encountering cloning errors if the https protocol is used when performed on our local machine. When running `$ git submodule update --init --recursive` multiple network errors are encountered primarily involving gecko-sdk

Verification can be quite troublesome if the Internet connection of the user is not fast enough. 

**Note:** As of version 2024.68.0, the [modifications](https://gitlab.com/walletscrutiny/walletScrutinyCom/-/blob/master/_android/world.bitkey.app.md#update-2024-07-26-for-version-2024630-4) I made to Bitkey's script and methodology still apply. I have [submitted a PR](https://github.com/proto-at-block/bitkey/pull/4) to them.

The modifications are for the following scripts: 

- [**verify-android-apk**](https://github.com/proto-at-block/bitkey/blob/4158f717ac2cee0f83595e276b1630ed3ddb6313/app/verifiable-build/android/verification/verify-android-apk)
- [**convert-aab-to-apks**](https://github.com/proto-at-block/bitkey/blob/4158f717ac2cee0f83595e276b1630ed3ddb6313/app/verifiable-build/android/verification/steps/convert-aab-to-apks)

This workflow will allow the user who have slow Internet connections to download the apks **using Bitkey's script** just by cloning the repository.

**On the user's local machine** 

- Once the Bitkey repository is cloned, we can access the `download-apk-from-phone` script in the directory **bitkey/app/verifiable-build/android/verification/steps**. When executed, it will download 4 split apks. These 4 apks can then be copied or uploaded to a faster machine with a faster Internet connection.

**On the "build server" or the faster machine**

- Proceed with the preparatory steps as detailed in the [README.md](https://github.com/proto-at-block/bitkey/tree/main/app/verifiable-build/android): 

```
git clone https://github.com/proto-at-block/bitkey.git
cd bitkey
git submodule update --init --recursive
```

- Modify **verify-android-apk** and **convert-aab-to-apks** as described above.

- Generate the corresponding **device-spec.json** using bundletool. (See [Android Developer Documentation](https://developer.android.com/tools/bundletool))

- We then execute `./bitkey/app/verifiable-build/android/verification/verify-android-apk -d /path/to/apk/directory -s /path/to/device-spec.json /path/to/bitkey/repo /path/to/build/directory`

# Successful Build

```
---------------------------

Comparing builds:

+ '[' 2 -ne 2 ']'
+ which diff
+ which /usr/local/android-sdk/build-tools/34.0.0/aapt2
+ lhs_comparable=/tmp/build/world.bitkey.app/2024.68.0/from-device/comparable
+ lhs_apks=/tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names
+ rhs_comparable=/tmp/build/world.bitkey.app/2024.68.0/locally-built/comparable
+ rhs_apks=/tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names
++ find /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names -maxdepth 1 -mindepth 1 -type f -exec basename '{}' ';'
+ lhs_apk_files='base.apk
arm64_v8a.apk
en.apk
xxhdpi.apk'
++ find /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names -maxdepth 1 -mindepth 1 -type f -exec basename '{}' ';'
+ rhs_apk_files='base.apk
arm64_v8a.apk
en.apk
xxhdpi.apk'
+++ echo 'base.apk
arm64_v8a.apk
en.apk
xxhdpi.apk'
++ sort -u /dev/fd/63 /dev/fd/62
+++ echo 'base.apk
arm64_v8a.apk
en.apk
xxhdpi.apk'
+ all_apk_files='arm64_v8a.apk
base.apk
en.apk
xxhdpi.apk'
++ diff -x resources.arsc -r /tmp/build/world.bitkey.app/2024.68.0/from-device/comparable /tmp/build/world.bitkey.app/2024.68.0/locally-built/comparable
+ differences=
+ diff_exit_status=0
+ diff_result=0
+ declare -a aapt_differences
+ for apk_file in $all_apk_files
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/arm64_v8a.apk ']'
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/arm64_v8a.apk ']'
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/arm64_v8a.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/arm64_v8a.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
---------                     -------
        0                     0 files
+ lhs_contains_resources_exit_code=11
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/arm64_v8a.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/arm64_v8a.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
---------                     -------
        0                     0 files
+ rhs_contains_resources_exit_code=11
+ '[' 11 -ne 0 ']'
+ '[' 11 -eq 0 ']'
+ '[' 11 -eq 0 ']'
+ echo 'Skipping aapt2 diff of arm64_v8a.apk as it doesn'\''t contain resources.arsc file'
Skipping aapt2 diff of arm64_v8a.apk as it doesn't contain resources.arsc file
+ for apk_file in $all_apk_files
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/base.apk ']'
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/base.apk ']'
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/base.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/base.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
   124960  1981-01-01 01:01   resources.arsc
---------                     -------
   124960                     1 file
+ lhs_contains_resources_exit_code=0
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/base.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/base.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
   124960  1981-01-01 01:01   resources.arsc
---------                     -------
   124960                     1 file
+ rhs_contains_resources_exit_code=0
+ '[' 0 -ne 0 ']'
+ '[' 0 -ne 0 ']'
++ /usr/local/android-sdk/build-tools/34.0.0/aapt2 diff /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/base.apk /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/base.apk
+ aapt_difference=
+ aapt_diff_exit_status=0
+ '[' '' '!=' '' ']'
+ diff_result=0
+ for apk_file in $all_apk_files
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/en.apk ']'
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/en.apk ']'
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/en.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/en.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
    48684  1981-01-01 01:01   resources.arsc
---------                     -------
    48684                     1 file
+ lhs_contains_resources_exit_code=0
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/en.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/en.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
    48684  1981-01-01 01:01   resources.arsc
---------                     -------
    48684                     1 file
+ rhs_contains_resources_exit_code=0
+ '[' 0 -ne 0 ']'
+ '[' 0 -ne 0 ']'
++ /usr/local/android-sdk/build-tools/34.0.0/aapt2 diff /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/en.apk /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/en.apk
+ aapt_difference=
+ aapt_diff_exit_status=0
+ '[' '' '!=' '' ']'
+ diff_result=0
+ for apk_file in $all_apk_files
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/xxhdpi.apk ']'
+ '[' '!' -f /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/xxhdpi.apk ']'
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/xxhdpi.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/xxhdpi.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
     9844  1981-01-01 01:01   resources.arsc
---------                     -------
     9844                     1 file
+ lhs_contains_resources_exit_code=0
+ unzip -l /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/xxhdpi.apk resources.arsc
Archive:  /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/xxhdpi.apk
  Length      Date    Time    Name
---------  ---------- -----   ----
     9844  1981-01-01 01:01   resources.arsc
---------                     -------
     9844                     1 file
+ rhs_contains_resources_exit_code=0
+ '[' 0 -ne 0 ']'
+ '[' 0 -ne 0 ']'
++ /usr/local/android-sdk/build-tools/34.0.0/aapt2 diff /tmp/build/world.bitkey.app/2024.68.0/from-device/normalized-names/xxhdpi.apk /tmp/build/world.bitkey.app/2024.68.0/locally-built/normalized-names/xxhdpi.apk
+ aapt_difference=
+ aapt_diff_exit_status=0
+ '[' '' '!=' '' ']'
+ diff_result=0
+ '[' 0 -eq 0 ']'
+ echo 'The builds are identical!'
The builds are identical!
```


{% include asciicast %}

## Diffs

`$ diff -r from-device/unpacked locally-built/unpacked`

```
Binary files from-device/unpacked/arm64_v8a/AndroidManifest.xml and locally-built/unpacked/arm64_v8a/AndroidManifest.xml differ
Only in from-device/unpacked/arm64_v8a: META-INF
Only in from-device/unpacked/arm64_v8a: stamp-cert-sha256
Binary files from-device/unpacked/base/AndroidManifest.xml and locally-built/unpacked/base/AndroidManifest.xml differ
Binary files from-device/unpacked/base/res/xml/splits0.xml and locally-built/unpacked/base/res/xml/splits0.xml differ
Binary files from-device/unpacked/base/resources.arsc and locally-built/unpacked/base/resources.arsc differ
Only in from-device/unpacked/base: stamp-cert-sha256
Binary files from-device/unpacked/en/AndroidManifest.xml and locally-built/unpacked/en/AndroidManifest.xml differ
Only in from-device/unpacked/en: META-INF
Binary files from-device/unpacked/en/resources.arsc and locally-built/unpacked/en/resources.arsc differ
Only in from-device/unpacked/en: stamp-cert-sha256
Binary files from-device/unpacked/xxhdpi/AndroidManifest.xml and locally-built/unpacked/xxhdpi/AndroidManifest.xml differ
Only in from-device/unpacked/xxhdpi: META-INF
Binary files from-device/unpacked/xxhdpi/resources.arsc and locally-built/unpacked/xxhdpi/resources.arsc differ
Only in from-device/unpacked/xxhdpi: stamp-cert-sha256
```

`$ diff -r from-device/normalized-names locally-built/normalized-names`

```
Binary files from-device/normalized-names/arm64_v8a.apk and locally-built/normalized-names/arm64_v8a.apk differ
Binary files from-device/normalized-names/base.apk and locally-built/normalized-names/base.apk differ
Binary files from-device/normalized-names/en.apk and locally-built/normalized-names/en.apk differ
Binary files from-device/normalized-names/xxhdpi.apk and locally-built/normalized-names/xxhdpi.apk differ
```

## We ran diffoscope on: 

- **unpacked/base/AndroidManifest.xml** and this is the [pastebin result](https://pastebin.com/KzQYFe6L)
- **unpacked/base/resources.arsc** the [pastebin result](https://pastebin.com/get7j6HF)
- **normalized-names/arm64_v8a.apk** - the [pastebin result](https://pastebin.com/2WkNiKaT)
  - `danny@lw10:~/work/builds/world.bitkey.app/2024.67.0-1/success/3$ diffoscope --text bitkey-2024.67.0.1-arm6_v8a.apk.txt from-device/normalized-names/arm64_v8a.apk locally-built/normalized-names/arm64_v8a.apk`
- **normalized-names/base.apk** - the [pastebin result](https://pastebin.com/E9DEu58p)
  - `danny@lw10:~/work/builds/world.bitkey.app/2024.67.0-1/success/3$ diffoscope --text bitkey-2024.67.0.1-base.apk.txt from-device/normalized-names/base.apk locally-built/normalized-names/base.apk`
- **normalized-names/en.apk** - the [pastebin result](https://pastebin.com/LLXWmZYW)
  - `danny@lw10:~/work/builds/world.bitkey.app/2024.67.0-1/success/3$ diffoscope --text bitkey-2024.67.0.1-en.apk.txt from-device/normalized-names/en.apk locally-built/normalized-names/en.apk`
- **normalized-names/xxhdpi.apk** - the [pastebin result](https://pastebin.com/MzkNNbJ8)
  - `danny@lw10:~/work/builds/world.bitkey.app/2024.67.0-1/success/3$ diffoscope --text bitkey-2024.67.0.1-xxhdpi.apk.txt from-device/normalized-names/xxhdpi.apk locally-built/normalized-names/xxhdpi.apk`
- **unpacked/base/res/xml/splits0.xml** - the [pastebin result](https://pastebin.com/LS54vYv7)
  - `danny@lw10:~/work/builds/world.bitkey.app/2024.67.0-1/success/3$ diffoscope --text bitkey-2024.67.0.1-splits0.xml.txt from-device/unpacked/base/res/xml/splits0.xml locally-built/unpacked/base/res/xml/splits0.xml`

## Analysis of the diffoscope results:

### arm64_v8a.apk
   
   Of particular interest is the human-readable portion of the diffoscope results:

   ```
      AndroidManifest.xml (decoded)
  │ ├── AndroidManifest.xml
  │ │ @@ -1,6 +1,4 @@
  │ │  <?xml version="1.0" encoding="utf-8"?>
  │ │ -<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="2024680001" android:splitTypes="base__abi" package="world.bitkey.app" split="config.arm64_v8a">
  │ │ -  <application android:hasCode="false" android:extractNativeLibs="false">
  │ │ -    <meta-data android:name="com.android.vending.derived.apk.id" android:value="2"/>
  │ │ -  </application>
  │ │ +<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="2024680001" package="world.bitkey.app" split="config.arm64_v8a">
  │ │ +  <application android:hasCode="false" android:extractNativeLibs="false"/>
  │ │  </manifest>
   ```

Like before, we find this segment shows that Google added this line: `<meta-data android:name="com.android.vending.derived.apk.id" android:value="2"/>`

Digging a little bit deeper, we find that:

> Apps that are signed by Google will have a 'derived APK ID' written into their AndroidManifest.xml file.

[Source](https://stackoverflow.com/questions/44689959/androidmanifest-xml-file)

This is further elaborated [here:](https://medium.com/@nimi0112/google-play-app-signing-to-secure-your-app-keys-883ab9996f18)

  
> Modifications to your APK
> 
> Apps that are signed by Google will have a “derived APK ID” written into their AndroidManifest.xml file. You’ll see a meta-data element added under the application tag that references <meta-data android:name=”com.android.vending.derived.apk.id” android:value=”[ID]” />.
>
> This ID is the identifier of the modified APK and will be reported in the usual bug reporting tools. You can use the derived APK ID to recognize a specific APK that was delivered by Play.
  
## Notes on the Bitkey Build 

Bitkey acknowledges the difference between apks extracted from AABs. More about this can be read [here](https://github.com/proto-at-block/bitkey/blob/main/app/verifiable-build/android/README.md#verification-notes):

  > Although Google Play should be using bundletool, APKs extracted from an AAB differ in more than just a signature.
  >
  > As mentioned above, we noticed a mismatch between language APKs downloaded by Google Play and those produced by bundletool. We use the --connected-device flag when invoking bundletool build-apks, which should produce the same set of APKs. However, looking at the output of bundletool get-device-spec, the supportedLocales list is often missing some languages that Google Play downloaded to the device.
  >
  > Another such difference are names of extracted APKs. We use the normalize-apk-names-new script to rename APK files to matching names.
  resources.arsc mismatch
  >
  > Until recently, once we normalized the APK names and contents, we could just run diff -r to check for identity. Unfortunately Google Play has changed how they build resources.arsc. From our testing, it seems like they are using a previously reserved byte. When built using bundletool, that byte is always 0, thus making direct comparison using diff impossible.
  >
  > Since resources are important part of the application, we're using aapt2 diff to check for differences between APKs from device and from bundletool.

Most of the diffs produced stemmed from signing certificates and signatures. It is apparent that Google Play modifies the apk as seen with the addition of `<meta-data android:name="com.android.vending.derived.apk.id" android:value="2"/>`. From a "strict reproducibility" standpoint, this app is not-reproducible in the sense that it is bit-by-bit identical in the binary level. But, if we factor in the explanation provided by Bitkey above, and if we take cognizance of the fact that Google Play alters the apks distributed to the users, we can consider these as benign differences and give Bitkey the verdict of **reproducible**.