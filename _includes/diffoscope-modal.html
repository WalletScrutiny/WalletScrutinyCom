
{% if include.label and include.url %}
<link rel="stylesheet" href="/assets/css/diffoscope-modal.css">
<div id="diffoscopeModal" class="diffoscope-modal">
    <div class="diffoscope-modal-content">
        <span class="diffoscope-close">âœ–</span>
        <iframe id="diffoscopeFrame"></iframe>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    var modal = document.getElementById('diffoscopeModal');
    var closeButton = document.querySelector('.diffoscope-close');
    var iframe = document.getElementById('diffoscopeFrame');

    // Open modal
    document.querySelector('a[data-modal-link="{{ include.url | escape_js }}"]').addEventListener('click', function (e) {
        e.preventDefault();
        iframe.src = this.href;
        modal.style.display = 'flex';
    });

    // Close modal
    closeButton.onclick = function () {
        modal.style.display = 'none';
        iframe.src = '';
    };

    // Close modal on outside click
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = 'none';
            iframe.src = '';
        }
    };
});
</script>
{% endif %}

<a href="{{ include.url }}" data-modal-link="{{ include.url }}">{% if include.label %}{{ include.label }}{% else %}Diffoscope{% endif %}</a>